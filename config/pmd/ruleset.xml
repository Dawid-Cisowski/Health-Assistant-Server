<?xml version="1.0"?>
<ruleset name="Health Assistant Custom Rules"
         xmlns="http://pmd.sourceforge.net/ruleset/2.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://pmd.sourceforge.net/ruleset/2.0.0 https://pmd.sourceforge.io/ruleset_2_0_0.xsd">

    <description>Custom PMD ruleset for Health Assistant project</description>

    <!-- Best Practices -->
    <rule ref="category/java/bestpractices.xml">
        <!-- GuardLogStatement is not needed with SLF4J/Log4j2 parameterized logging -->
        <exclude name="GuardLogStatement"/>
        <!-- AvoidLiteralsInIfCondition is too strict for simple comparisons like > 0 -->
        <exclude name="LiteralsFirstInComparisons"/>
        <!-- Exclude strict test assertion rules - Spring Modulith tests use verify() as assertion -->
        <exclude name="UnitTestContainsTooManyAsserts"/>
        <exclude name="UnitTestAssertionsShouldIncludeMessage"/>
    </rule>

    <!-- Error Prone -->
    <rule ref="category/java/errorprone.xml">
        <!-- Allow simple literals in conditions like size > 0 -->
        <exclude name="AvoidLiteralsInIfCondition"/>
        <!-- Allow duplicate literals - extracting constants for everything leads to over-engineering -->
        <exclude name="AvoidDuplicateLiterals"/>
        <!-- Allow field names matching method names - needed for record-style accessor patterns in enums
             and ThreadLocalAccessor implementations where field KEY and method key() are conventional -->
        <exclude name="AvoidFieldNameMatchingMethodName"/>
        <!-- Allow null assignment - needed for conditional initialization patterns with Optional-like semantics -->
        <exclude name="NullAssignment"/>
        <!-- MissingSerialVersionUID is not needed for runtime exceptions that are never serialized -->
        <exclude name="MissingSerialVersionUID"/>
    </rule>

</ruleset>
